# MCC_codes_parser
Код парсера, который выкачивает данные MCC кодов, затем пишет в базу.
Исходные данные остаются в виде файлов .txt

# Конфигурация
* В файле config.py можно выставить два режима -тестовый и рабочий, поменяв параметр TEST_MODE. 
* Также можно поменять настройки базы данных, указав параметры подключения SQL_ALCHEMY_URI.
* Для замедления или ускорения в конфигах есть параметры SHORT_SLEEP, LONG_SLEEP

При создании парсера, пришлось учесть несколько ограничений:
1. По негласным правилам парсинг желательно делать в один поток, с задержкой от 1-3 сек. 
2. Есть некоторые особенности сайта, в частности, неравномерное распределение компаний по кодам, и ограничения в выдаче в 20 компаний, при проходе по страницам кодов.
  Для этого пришлось добавить еще один проход по расширенному поиску.
  
  
  
# Как пользоваться
1. нужно склонировать репозиторий
2. создать виртуальное окружение
3. установить зависимости
4. поправить конфиги в config.py
5. можно воспользоваться демо-ноутбуком или запустить файл parser_main_app.py
6. дождаться загрузки данных (по дефолту данные пишутся в sqlite базу, но можно в любую, например posgres)

# ToDо
1. можно попытаться немного распараллелить, хотя-бы на три потока через прокси (в нарушение п.1, но...) + распараллелить потоки I/O
2. пофиксить работу с базой 
3. доработать очереди
4. сделать UI + API
5. добавить еще проверок и устойчивости
6. что-то сделать с абсолютными путями


*в папке data присутствуен некоторое количесвто тестовых файлов, они только для демонстрации и их можно удалить



